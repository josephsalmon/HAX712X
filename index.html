<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>HAX712X: Software development for data sciences</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="custom.scss">
</head>

<body class="floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">HAX712X</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="./index.html" rel="" target="" aria-current="page">
 <span class="menu-text">Overview</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-courses" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Courses</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-courses">    
        <li>
    <a class="dropdown-item" href="./Courses/Bash/tp.html" rel="" target="">
 <span class="dropdown-text">Command-line tools</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./Courses/Git/tp.html" rel="" target="">
 <span class="dropdown-text">Version control with Git</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./Courses/IDE/tp.html" rel="" target="">
 <span class="dropdown-text">Integrated Development Environment</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./Courses/Venv/tp.html" rel="" target="">
 <span class="dropdown-text">Virtual Python Environment</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./Courses/CI/tp.html" rel="" target="">
 <span class="dropdown-text">Continuous Integration</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./Courses/Docs/tp.html" rel="" target="">
 <span class="dropdown-text">Documentation with Sphinx</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li>
    <a class="dropdown-item" href="./Courses/Python-modules/tp.html" rel="" target="">
 <span class="dropdown-text">Creating a <code>python</code> module</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./Courses/ClassesExceptions/tp.html" rel="" target="">
 <span class="dropdown-text">Classes &amp; Exceptions</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./Courses/Test/tp.html" rel="" target="">
 <span class="dropdown-text">Unit Tests</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./Courses/Pandas/tp.html" rel="" target="">
 <span class="dropdown-text">Pandas</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./Courses/Numpy/tp.html" rel="" target="">
 <span class="dropdown-text">Numpy cheat sheet</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./Courses/ScipyNumpy/tp.html" rel="" target="">
 <span class="dropdown-text">SciPy</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./Courses/TimeMemory/tp.html" rel="" target="">
 <span class="dropdown-text">Time &amp; memory efficiency</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-projects" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Projects</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-projects">    
        <li>
    <a class="dropdown-item" href="./Projects/README.html" rel="" target="">
 <span class="dropdown-text">Guidelines</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./Projects/2023-2024/README.html" rel="" target="">
 <span class="dropdown-text">2023-2024</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./Projects/2022-2023/README.html" rel="" target="">
 <span class="dropdown-text">2022-2023</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./Projects/2021-2022/README.html" rel="" target="">
 <span class="dropdown-text">2021-2022</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="./Bonus/README.html" rel="" target="">
 <span class="menu-text">Bonus</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
    <a href="https://github.com/josephsalmon/HAX712X" rel="" title="GitHub" class="quarto-navigation-tool px-1" aria-label="GitHub"><i class="bi bi-github"></i></a>
    <a href="https://moodle.umontpellier.fr/course/view.php?id=22454" rel="" title="Moodle" class="quarto-navigation-tool px-1" aria-label="Moodle"><i class="bi bi-bicycle"></i></a>
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#hax712x-software-development-for-data-science" id="toc-hax712x-software-development-for-data-science" class="nav-link active" data-scroll-target="#hax712x-software-development-for-data-science">HAX712X: Software development for data science</a>
  <ul class="collapse">
  <li><a href="#teachers" id="toc-teachers" class="nav-link" data-scroll-target="#teachers">Teachers</a></li>
  <li><a href="#prerequisite" id="toc-prerequisite" class="nav-link" data-scroll-target="#prerequisite">Prerequisite</a></li>
  <li><a href="#course-description" id="toc-course-description" class="nav-link" data-scroll-target="#course-description">Course description</a></li>
  <li><a href="#grading" id="toc-grading" class="nav-link" data-scroll-target="#grading">Grading</a>
  <ul class="collapse">
  <li><a href="#intermediate-projects-20-10" id="toc-intermediate-projects-20-10" class="nav-link" data-scroll-target="#intermediate-projects-20-10">Intermediate projects (20 % + 10 %)</a></li>
  <li><a href="#final-project-70" id="toc-final-project-70" class="nav-link" data-scroll-target="#final-project-70">Final project (70 %)</a></li>
  <li><a href="#bonus" id="toc-bonus" class="nav-link" data-scroll-target="#bonus">Bonus</a></li>
  </ul></li>
  <li><a href="#books-and-other-resources" id="toc-books-and-other-resources" class="nav-link" data-scroll-target="#books-and-other-resources">Books and other resources</a>
  <ul class="collapse">
  <li><a href="#moodle-webpage" id="toc-moodle-webpage" class="nav-link" data-scroll-target="#moodle-webpage">Moodle webpage</a></li>
  <li><a href="#additional-resources" id="toc-additional-resources" class="nav-link" data-scroll-target="#additional-resources">Additional resources</a></li>
  </ul></li>
  </ul></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/josephsalmon/HAX712X/blob/main/index.qmd" class="toc-action">View source</a></p><p><a href="https://github.com/josephsalmon/HAX712X/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">



<section id="hax712x-software-development-for-data-science" class="level1">
<h1>HAX712X: Software development for data science</h1>
<p>(Almost) everything you need to know as an applied mathematician/statistician concerning coding and system administration.</p>
<section id="teachers" class="level2">
<h2 class="anchored" data-anchor-id="teachers">Teachers</h2>
<ul>
<li>Joseph Salmon: <a href="mailto:joseph.salmon@umontpellier.fr">joseph.salmon@umontpellier.fr</a>,</li>
<li>Benjamin Charlier: <a href="mailto:benjamin.charlier@umontpellier.fr">benjamin.charlier@umontpellier.fr</a></li>
</ul>
<p>This course material was improved with the help of some students including:</p>
<ul>
<li><a href="https://github.com/AmelieVernay">Amelie Vernay</a></li>
<li><a href="https://github.com/tanglef">Tanguy Lefort</a></li>
</ul>
</section>
<section id="prerequisite" class="level2">
<h2 class="anchored" data-anchor-id="prerequisite">Prerequisite</h2>
<p>Students are expected to know basic notions of probabilities, optimization, linear algebra and statistics for this course. Some rudiments in coding are also expected (if, for, while, functions) but not mandatory.</p>
</section>
<section id="course-description" class="level2">
<h2 class="anchored" data-anchor-id="course-description">Course description</h2>
<p>This course focuses on discovering good coding practices (the language used is Python, but some elements of bash and git will also be useful) for professional coding. A special focus on data processing and visualization will be at the heart of the course. We will mostly focus on basic programming concepts, as well as on discovering the Python scientific libraries, including <code>numpy, scipy, pandas, matplotlib, seaborn</code>. Beyond <code>pandas</code> ninja skills, we will also introduce modern practices for coders: (unitary) tests, version control, documentation generation, etc.</p>
<table class="table-striped table">
<caption></caption>
<thead>
<tr class="header">
<th>Date</th>
<th>Teacher</th>
<th>Details</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>11/09/2023</td>
<td>BC</td>
<td><a href="./Courses/Bash/tp.html">Command-line tools</a></td>
</tr>
<tr class="even">
<td>22/09/2023</td>
<td>BC</td>
<td><a href="./Courses/Git/tp.html">Version control with Git</a></td>
</tr>
<tr class="odd">
<td>29/09/2023</td>
<td>BC</td>
<td><a href="./Courses/IDE/tp.html">IDE</a> / <a href="./Courses/Venv/tp.html">Python virtual environment</a></td>
</tr>
<tr class="even">
<td>06/10/2023</td>
<td>BC+JS</td>
<td><a href="./Courses/Python-modules/tp.html">Creating a Python Module</a>, <a href="./Courses/ClassesExceptions/tp.html">Classes &amp; Exceptions</a></td>
</tr>
<tr class="odd">
<td>13/10/2023</td>
<td>JS</td>
<td><a href="./Courses/Docs/tp.html">Markdown to html (Quarto, Sphinx,…)</a>, <a href="./Courses/CI/tp.html">Continuous Integration (CI)</a></td>
</tr>
<tr class="even">
<td>20/10/2023</td>
<td>JS</td>
<td><a href="./Courses/Pandas/tp.html">Pandas</a></td>
</tr>
<tr class="odd">
<td>27/10/2023</td>
<td>BC</td>
<td><a href="./Courses/Test/tp.html">Unit Tests</a></td>
</tr>
<tr class="even">
<td>10/11/2023</td>
<td>JS</td>
<td><a href="./Courses/ScipyNumpy/tp.html">SciPy</a></td>
</tr>
<tr class="odd">
<td>17/11/2023</td>
<td>JS</td>
<td><a href="./Courses/TimeMemory/tp.html">Time &amp; memory efficiency</a></td>
</tr>
<tr class="even">
<td>20/11/2023</td>
<td>JS</td>
<td><a href="./Courses/TimeMemory/tp.html">Graphs</a></td>
</tr>
<tr class="odd">
<td>15/12/2023</td>
<td>BC+JS</td>
<td>The end: Project presentations</td>
</tr>
</tbody>
</table>
</section>
<section id="grading" class="level2">
<h2 class="anchored" data-anchor-id="grading">Grading</h2>
<p>For this course, the grading consists of two projects: one group project (group composition available on <a href="https://moodle.umontpellier.fr/course/view.php?id=22454">Moodle</a>) and a personal one.</p>
<section id="intermediate-projects-20-10" class="level3">
<h3 class="anchored" data-anchor-id="intermediate-projects-20-10">Intermediate projects (20 % + 10 %)</h3>
<ol type="1">
<li><p>This is <strong>a personal project</strong>. We expect you to create a simple GitHub page, with information answering the guidelines. This part corresponds to <strong>20% of the final grade</strong>. The due date is <strong>November 16 (23:59)</strong>.</p></li>
<li><p>This part consists of starting the <strong>group project</strong>. It will consist of preliminary work and organization of the workload, git first steps for the group project. The groups will be available on <a href="https://moodle.umontpellier.fr/course/view.php?id=22454">Moodle</a>. This part corresponds to <strong>10% of the final grade</strong>. The due date is <strong>October 16 (23:59)</strong></p></li>
</ol>
</section>
<section id="final-project-70" class="level3">
<h3 class="anchored" data-anchor-id="final-project-70">Final project (70 %)</h3>
<p>The details of the projects might evolve before the allocation phase, and a precise grid will be given in the project section.</p>
<p>The project repository <strong>must show a balanced contribution between group members</strong> and intra-group grade variation could be made to reflect issues on the intra-group workload balance. The due date is <strong>December 10 (23:59)</strong>.</p>
</section>
<section id="bonus" class="level3">
<h3 class="anchored" data-anchor-id="bonus">Bonus</h3>
<p><strong>1 supplementary point</strong> on the final grade of the course can be obtained for contributions to improve the course material (practicals, Readme, etc.). See the <a href="./Bonus/README.html">Bonus</a> section for more details on how to proceed.</p>
</section>
</section>
<section id="books-and-other-resources" class="level2">
<h2 class="anchored" data-anchor-id="books-and-other-resources">Books and other resources</h2>
<p>The resources for the course are available on the present <code>GitHub</code> repository. Additional elementary elements (<strong>in French</strong>) on Python are available in the course <a href="http://josephsalmon.eu/HLMA310.html">HLMA310</a> and the associated lecture notes <a href="http://josephsalmon.eu/enseignement/Montpellier/HLMA310/IntroPython.pdf">IntroPython.pdf</a>.</p>
<section id="moodle-webpage" class="level3">
<h3 class="anchored" data-anchor-id="moodle-webpage">Moodle webpage</h3>
<p>The <a href="https://moodle.umontpellier.fr/course/view.php?id=22454">Moodle web page</a> is available to registered students only.</p>
</section>
<section id="additional-resources" class="level3">
<h3 class="anchored" data-anchor-id="additional-resources">Additional resources</h3>
<ul>
<li><p>(General): <a href="https://missing.csail.mit.edu/">The Missing Semester of Your CS Education</a></p></li>
<li><p>(Algorithmic basis): <a href="https://jeffe.cs.illinois.edu/teaching/algorithms/#book">Algorithms</a>, by Jeff Erickson</p></li>
<li><p>(Data Science): <a href="https://jakevdp.github.io/PythonDataScienceHandbook/">Python Data Science Handbook, With Application to Understanding Data</a> by J. Van DerPlas, 2016;<br> <strong>videos</strong>: <a href="http://jakevdp.github.io/blog/2017/03/03/reproducible-data-analysis-in-jupyter/">Reproducible Data Analysis in Jupyter</a></p></li>
<li><p>(General) Skiena, <em>The algorithm design manual</em>, 1998</p></li>
<li><p>(General) Courant et <em>al.</em>, <em>Informatique pour tous en classes préparatoires aux grandes écoles: Manuel d’algorithmique et programmation structurée avec Python</em>, 2013, (french)</p></li>
<li><p>(General/data science) Guttag, <em>Introduction to Computation and Programming</em>, 2016</p></li>
<li><p>(Code and style) Boswell et Foucher, <em>The Art of Readable Code</em>, 2011</p></li>
<li><p>(Scientific computing tools for Python) <a href="http://www.scipy-lectures.org/">Scipy lectures notes</a></p></li>
<li><p>(Datasets) <a href="http://openclimatedata.net/">Open Climate Data</a></p></li>
</ul>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>